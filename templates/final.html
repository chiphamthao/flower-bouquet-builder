{% extends "layout.html" %} {% block content %}
<div class="content">
  <h1 class="page-title" style="color: #4a7a4a">Final Bouquet</h1>

  <section class="canvas-area">
    <div
      id="canvas"
      class="drop-zone-canvas"
      style="position: relative; height: 600px; width: 800px"
    ></div>
  </section>
</div>

<!-- html2canvas for screenshot -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const canvasData = {{ canvas_flowers|tojson }};
    console.log(canvasData);
    const canvasEl = document.getElementById('canvas');
    // render static items
    canvasData.forEach(info => {
      const { left, top, width, height, rotation, src } = info;
      if (typeof rotation === 'object' && rotation.degrees !== undefined) {
      angle = rotation.degrees;
    } else if (typeof rotation === 'number') {
      angle = Math.abs(rotation) <= 2 * Math.PI
        ? rotation * (180 / Math.PI)
        : rotation;
    } else {
      angle = 0;
    }
      const img = document.createElement('img');
      img.src = src;
      Object.assign(img.style, {
        position: 'absolute',
        left: left + 'px',
        top: top + 'px',
        width: width + 'px',
        height: height + 'px',
        transform: `rotate(${angle}deg)`,
        transformOrigin: 'center center',
        pointerEvents: 'none'
      });
      canvasEl.appendChild(img);
    });
  });
</script>
{% endblock %}
